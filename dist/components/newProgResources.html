<div class="gb-form">
	<form class="layui-form" action="">
		<div class="newform newprog">
			<p class="newform-tit"><i class="iconfont icon-iconfontxinjianwenjian"></i>新建节目资源</p>
			<div class="form-oneitem">
				<div class="fortit">
					<span class="oneitem-tit">新建节目资源</span>
				</div>
				<div class="oneitem-cont">
					<p class="oneitem-tit"><small>*</small>节目名称</p>
					<div class="tnoneimp">
						<input type="text" class="imptxt" name="name" />
					</div>
					<p class="oneitem-tit"><small>*</small>节目类型</p>
					<div class="progtype">
						<div class="progresone">
							<ul class="matlist">
								<li>
									<div class="matcheck">
										<input type="radio" name="type" id="matone" checked="checked" value="Radio" />
										<label for="matone">调频电台</label>
									</div>
								</li>
								<li>
									<div class="matcheck">
										<input type="radio" name="type" id="matwo" value="CableTV" />
										<label for="matwo">有线电视</label>
									</div>
								</li>
								<li>
									<div class="matcheck">
										<input type="radio" name="type" id="mathr" value="DigitalTV" />
										<label for="mathr">无线地面数字电视</label>
									</div>
								</li>
								<li>
									<div class="matcheck">
										<input type="radio" name="type" id="matfou" value="SATV" />
										<label for="matfou">卫星电视</label>
									</div>
								</li>
								<li>
									<div class="matcheck">
										<input type="radio" name="type" id="matfiv" value="OnlineLive" />
										<label for="matfiv">网络在线直播</label>
									</div>
								</li>
								<li>
									<div class="matcheck">
										<input type="radio" name="type" id="matsix" value="OnlineMedia" />
										<label for="matsix">网络在线媒体</label>
									</div>
								</li>
							</ul>
						</div>
						<i class="iconfont icon-youjiantou"></i>
						<div class="progrestwo">
							<div class="prchodiv prtype-onecho">
								<p class="oneitem-tit">调频电台</p>
								<div class="prtop">
									<p class="oneitem-tit"><small>*</small>频率</p>
									<div class="layui-input-inline">
										<select name="Radio_frequency" lay-search="">
											<option value="">请选择频率</option>
											<option value="中波电台">中波电台</option>
											<option value="调频电台">调频电台</option>
											<option value="有线电视">有线电视</option>
											<option value="无线地面数字电视">无线地面数字电视</option>
											<option value="卫星电视">卫星电视</option>
											<option value="网络在线直播">网络在线直播</option>
											<option value="网络在线媒体">网络在线媒体</option>
										</select>
									</div>
								</div>
								<div class="prtop">
									<p class="oneitem-tit"><small>*</small>制式</p>
									<ul class="msgrank">
										<li>
											<input type="radio" value="FM" name="system" id="wacheone" checked="checked" />
											<label for="wacheone">FM</label>
										</li>
										<li>
											<input type="radio" value="CDR" name="system" id="wachetwo" />
											<label for="wachetwo">CDR</label>
										</li>
									</ul>
								</div>
							</div>
							<div class="prchodiv prtype-twocho">
								<p class="oneitem-tit">有线电视</p>
								<div class="prtop">
									<p class="oneitem-tit"><small>*</small>频率</p>
									<div class="layui-input-inline">
										<select name="CableTV_frequency" lay-search="">
											<option value="">请选择频率</option>
											<option value="中波电台">中波电台</option>
											<option value="调频电台">调频电台</option>
											<option value="有线电视">有线电视</option>
											<option value="无线地面数字电视">无线地面数字电视</option>
											<option value="卫星电视">卫星电视</option>
											<option value="网络在线直播">网络在线直播</option>
											<option value="网络在线媒体">网络在线媒体</option>
										</select>
									</div>
								</div>
								<div class="prtop">
									<p class="oneitem-tit"><small>*</small>调制方式</p>
									<div class="layui-input-inline">
										<select name="modulation" lay-search="">
											<option value="">请选择调试方式</option>
											<option value="4QAM">4QAM</option>
											<option value="16QAM">16QAM</option>
											<option value="32QAM">32QAM</option>
											<option value="64QAM">64QAM</option>
											<option value="128QAM">128QAM</option>
											<option value="256QAM">256QAM</option>
										</select>
									</div>
								</div>
								<div class="prtop">
									<p class="oneitem-tit"><small>*</small>符号率</p>
									<ul class="msgrank">
										<li>
											<input type="radio" name="symbol" value="6875" id="sycheone" />
											<label for="sycheone">6875</label>
										</li>
										<li>
											<input type="radio" name="symbol" value="6900" id="sychetwo" />
											<label for="sychetwo">6900</label>
										</li>
									</ul>
								</div>
								<div class="prtop">
									<p class="oneitem-tit"><small>*</small>节目号</p>
									<div class="tnoneimp">
										<input type="text" class="imptxt" name="CableTV_programID" />
									</div>
								</div>
							</div>
							<div class="prchodiv prtype-thrcho">
								<p class="oneitem-tit">无线地面数字电视</p>
								<div class="prtop">
									<p class="oneitem-tit"><small>*</small>频率</p>
									<div class="layui-input-inline">
										<select name="DigitalTV_frequency" lay-search="">
											<option value="">请选择频率</option>
											<option value="中波电台">中波电台</option>
											<option value="调频电台">调频电台</option>
											<option value="有线电视">有线电视</option>
											<option value="无线地面数字电视">无线地面数字电视</option>
											<option value="卫星电视">卫星电视</option>
											<option value="网络在线直播">网络在线直播</option>
											<option value="网络在线媒体">网络在线媒体</option>
										</select>
									</div>
								</div>
								<div class="prtop">
									<p class="oneitem-tit"><small>*</small>节目号</p>
									<div class="tnoneimp">
										<input type="text" name="DigitalTV_programID" class="imptxt"/>
									</div>
								</div>
							</div>
							<div class="prchodiv prtype-foucho">
								<p class="oneitem-tit">卫星电视</p>
								<div class="prtop">
									<p class="oneitem-tit"><small>*</small>卫星型号</p>
									<ul class="msgrank">
										<li>
											<input type="radio" name="satelliteType" id="numcheone" value="中星6B" />
											<label for="numcheone">中星6B</label>
										</li>
										<li>
											<input type="radio" name="satelliteType" id="numchetwo" value="中星9" />
											<label for="numchetwo">中星9</label>
										</li>
									</ul>
								</div>
								<div class="prtop">
									<p class="oneitem-tit"><small>*</small>极化方式</p>
									<div class="layui-input-inline">
										<select name="polarity" lay-search="">
											<option value="">请选择频率</option>
											<option value="中波电台">中波电台</option>
											<option value="调频电台">调频电台</option>
											<option value="有线电视">有线电视</option>
											<option value="无线地面数字电视">无线地面数字电视</option>
											<option value="卫星电视">卫星电视</option>
											<option value="网络在线直播">网络在线直播</option>
											<option value="网络在线媒体">网络在线媒体</option>
										</select>
									</div>
								</div>
								<div class="prtop">
									<p class="oneitem-tit"><small>*</small>节目号</p>
									<div class="tnoneimp">
										<input type="text" name="SATV_programID" class="imptxt"/>
									</div>
								</div>
							</div>
							<div class="prchodiv prtype-fivcho">
								<p class="oneitem-tit">网络在线直播</p>
								<div class="prtop">
									<p class="oneitem-tit"><small>*</small>直播链接地址</p>
									<div class="tnoneimp">
										<input type="text" name="liveAddress" class="imptxt"/>
									</div>
								</div>
							</div>
							<div class="prchodiv prtype-sixcho">
								<p class="oneitem-tit">网络在线媒体</p>
								<div class="prtop">
									<p class="oneitem-tit"><small>*</small>在线媒体列表</p>
									<div class="layui-input-inline">
										<select name="media" lay-search="">
											<option value="">请选择在线媒体列表</option>
											<option value="在线媒体一">在线媒体一</option>
											<option value="在线媒体二">在线媒体二</option>
											<option value="在线媒体三">在线媒体三</option>
											<option value="在线媒体四">在线媒体四</option>
											<option value="在线媒体五">在线媒体五</option>
										</select>
									</div>
								</div>
							</div>
						</div>	
					</div>
					<div class="progtype">
						<p class="oneitem-tit"><small>*</small>所属地区</p>
						<div class="oneimp">
							<input type="text" readonly name="area" class="imptxt" id="citySel" lay-verify="required" onclick="showMenu();"/>
							<div id="menuContent" class="gb-tree scroll" style="display:none;">
								<ul id="treeDemo" class="ztree"></ul>
							</div>
						</div>
					</div>
					<div class="msgcont">
						<p class="oneitem-tit">备注</p>
						<div class="txtimp">
							<textarea id="imparea" name="audit" class="imparea" placeholder="请输入消息文本"></textarea>
							<span class="area-count"><span class="countnew">0</span>/200</span>
						</div>
					</div>
				</div>
			</div>
			<div class="tocreat">
				<div class="progcreat">
					<input type="button" value="确认创建" class="tocreatbtn" lay-submit lay-filter="*" />
				</div>
			</div>
			<p class="botword">© 2017-2018 浙江省应急广播平台</p>
		</div>
	</form>
</div>

	



<script type="text/javascript">
	$(document).ready(function(){
		if(parseInt($('.progtype').css('height')) > 418){
			$('.progtype i').removeClass('icon-youjiantou').addClass('icon-dotted-arrow-down');
		}else{
			$('.progtype i').removeClass('icon-dotted-arrow-down').addClass('icon-youjiantou');
		}
		$(window).resize(function(){
			if(parseInt($('.progtype').css('height')) > 418){
				$('.progtype i').removeClass('icon-youjiantou').addClass('icon-dotted-arrow-down');
			}else{
				$('.progtype i').removeClass('icon-dotted-arrow-down').addClass('icon-youjiantou');
			}
		})

		$('.matlist li').find('.matcheck label').click(function(){
			//console.log($(this).parents('li').index());
			var theshow = $(this).parents('li').index();
			$('.prchodiv').hide();
			$('.prchodiv').eq(theshow).show();
		})

		// 获取地区
		$.ajax({
		    url: portsrc+'/allArea',
		    type: 'post',
		    dataType: 'json',
		    data:{
		    	token:token,
		    },
		    success: function(data) {
		    	console.log(data)
				$.fn.zTree.init($("#treeDemo"), selectSetting, data.body);
		    }
		});
		layui.use('form', function(){
			var form = layui.form;
			form.render();
			var itbtn = $('<span class="itbtn"></span>');
			$('.layui-select-title').append(itbtn);
			$('.gb-form .layui-form-radio').remove();
			form.on('submit(*)', function(data){
				var datas={};
				datas.name=data.field.name;
				datas.type=data.field.type;
				datas.remark=data.field.remark;
				datas.area=data.field.area;
				
				if(data.field.type=='Radio'){//调频电台
					datas.program={
						frequency:data.field.Radio_frequency,
						system:data.field.system,
					};
				}else if(data.field.type=='CableTV'){//有线电视
					datas.program={
						frequency:data.field.CableTV_frequency,
						modulation:data.field.modulation,
						symbol:data.field.symbol,
						programID:data.field.CableTV_programID,
					};
				}else if(data.field.type=='DigitalTV'){//无线地面数字电视
					datas.program={
						frequency:data.field.DigitalTV_frequency,
						programID:data.field.DigitalTV_programID,
					};
				}else if(data.field.type=='SATV'){//卫星电视
					datas.program={
						satelliteType:data.field.satelliteType,
						polarity:data.field.DigitalTV_polarity,
						programID:data.field.SATV_programID,
					};
				}else if(data.field.type=='OnlineLive'){//网络在线直播
					datas.program={
						liveAddress:data.field.liveAddress,
					};
				}else if(data.field.type=='OnlineMedia'){//网络在线媒体
					datas.program={
						media:data.field.media,
					};
				}

				$.ajax({
				    url: portsrc+"/res/program/add",
				    type: 'post',
				    dataType: 'json',
				    data:{
				    	token:token,
				    	program:JSON.stringify(datas)
				    },
				    success: function(data) {
						layer.open({
				            title: '提示',
			        		shadeClose:true,
				            content: '新建成功'
				        });
				    }
				});
				return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
			});
		});
		
	})
</script>