<div class="gb-form">
	<form class="layui-form" action="">
		<div class="newform newprog">
			<p class="newform-tit"><i class="iconfont icon-bianji1"></i>新建角色</p>
			<div class="form-oneitem">
				<div class="fortit">
					<span class="oneitem-tit">新建角色</span>
				</div>
				<div class="oneitem-cont">
					<div class="progtype">
						<p class="oneitem-tit"><small>*</small>角色名称</p>
						<div class="tnoneimp">
							<input type="text" class="imptxt"/>
							<p class="itemexp" style="color: red;">！角色名称重复</p>
						</div>
					</div>
					<div class="progtype">
						<div class="msgcont">
							<p class="oneitem-tit"><small>*</small>角色说明</p>
							<div class="txtimp">
								<textarea id="imparea" class="imparea" maxlength="200" onfocus="if(this.value == defaultValue){this.value = '';this.style.color = '#333'}" onblur="if(!value){this.value = defaultValue;this.style.color = '#ccc'}">请输入说明</textarea>
								<span class="area-count"><span class="countnew">0</span>/200</span>
							</div>
						</div>
					</div>
					<div class="progtype">
						<p class="oneitem-tit"><small>*</small>角色权限</p>
						<div class="gb-tree scroll gb-tree-noHeight">
							<ul id="gb_tree_all1" class="ztree ztree-check"></ul>
						</div>
					</div>
				</div>
			</div>
			<div class="tocreat">
				<div class="progcreat">
					<input type="button" value="确定新建" class="tocreatbtn" />
				</div>
			</div>
			<p class="botword">© 2017-2018 浙江省应急广播平台</p>
		</div>
		<div class="choose">
			<p class="choword">确定删除此任务消息吗？</p>
			<div class="chobtn">
				<input type="button" value="删除" class="chopri cho-delete" />
				<input type="button" value="取消" class="cho-cancel" />
			</div>
			<span class="triangle"><em></em></span>
		</div>
	</form>
</div>

	



<script type="text/javascript">
	// zTree 的参数配置，深入使用请参考 API 文档（setting 配置详解）
	var allSetting = {
		view:{
			showLine:false,//去掉连接线
		},
		check:{//添加复选框
			enable:true,
		},
		callback: {
			onCheck: zTreeOnCheck
		}
	};
	function zTreeOnCheck(event, treeId, treeNode) {
		// 勾选复选框将触发这个方法，在这里调用ajax获取已选数据
		treeObj = $.fn.zTree.getZTreeObj("gb_tree_all1");//获取全部数据的树的对象
	    console.log(treeObj.getCheckedNodes(true).concat(treeObj.getCheckedNodes(false)))
	};
	// zTree 的数据属性，深入使用请参考 API 文档（zTreeNode 节点数据详解
	//带复选框的树
	$(".ztree-check").each(function() {
		$.fn.zTree.init($(this), allSetting, jurisdictionData);
	});
</script>