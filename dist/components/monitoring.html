<div class="item gb-monitoring">
	<!-- 消息滚动 -->
	<div class="gb-marquee">
		<marquee behavior="" direction="" align="absmiddle" onmouseover=stop() onmouseout=start()>
			<a href="##">
				<i class="iconfont icon-guangbo i"></i>
				<em class="i">国家应急平台消息国家应急平台消息国家应急平台消息</em>
			</a>
			<a href="##">
				<i class="iconfont icon-guangbo i"></i>
				<em class="i">国家应急平台消息国家应急平台消息国家应急平台消息</em>
			</a>
		</marquee>
	</div>
	<div class="gb-main">
		<!-- 事件按钮组 -->
		<div class="gb-incident-btn">
			<button class="layui-btn layui-btn-normal">发布效果（全事件）</button>
			<button class="layui-btn layui-btn-primary">执行效果（单一事件）</button>
			<button class="layui-btn layui-btn-normal gb-projection-btn">投屏全事件</button>
		</div>
		<!-- 事件总数 -->
		<div class="gb-incident-box">
			<!-- 发布效果全事件 -->
			<div class="item">
				<div class="gb-chart-box">
					<div class="gb-incident-count">
						<button class="layui-btn layui-btn-danger">事件总数：<em>6</em></button>
						<button class="layui-btn layui-btn-warm">发布总数：<em>6</em></button>
					</div>
					<div class="gb-chart-incident-pie">
						<div class="gb-chart-item">
							<div class="gb-chart gb-pie" id="pie-incident"></div>
						</div>
						<div class="gb-chart-item">
							<div class="gb-chart gb-pie" id="pie-incident-rank"></div>
						</div>
						<div class="gb-chart-item">
							<div class="gb-chart gb-bar" id="bar-task-num"></div>
						</div>
					</div>
					<div class="gb-chart-incident-bar">
						<div class="gb-chart-item">
							<div class="gb-chart gb-bar" id="bar-incident-type"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
    var incidentChart = echarts.init(document.getElementById('pie-incident'));
    var incidentRankChart = echarts.init(document.getElementById('pie-incident-rank'));
    var taskNumChart = echarts.init(document.getElementById('bar-task-num'));
    var incidentTypeChart = echarts.init(document.getElementById('bar-incident-type'));

    // 事件发布
	incidentOption = {
	    title: {
	        text: '事件发布',
	        bottom: '0',
	        left:'center',
	        textStyle: { 
	            color: '#585c65'
	        }
	    },
	    tooltip : {
	        formatter: "{b} : {c} ({d}%)"
	    },
	    visualMap: {
	        show: false,
	        min: 80,
	        max: 600,
	        inRange: {
	            colorLightness: [0, 1]
	        }
	    },
	    legend: {
	        // orient: 'vertical',
	        x: 'center',
	        bottom: '10%',
	        itemWidth:'10',
	        itemHeight:'10',
	        // data:['气象局','水利','国家应急广播平台','应急办'],
	        align:"right"
	    },
	    series : [
	        {
	            type:'pie',
	            radius : '60%',
	            center: ['50%', '43%'],
	            data:[
		            {
	                	value:25, 
	                	name:'气象局',
	                	itemStyle: {
							normal: {
								color: "#6e6fe6"
							}
				         },
	                },{
	                	value:30, 
	                	name:'水利',
	                	itemStyle: {
							normal: {
								color: "#9ca6ff"
							}
				         },
	                },{
	                	value:15, 
	                	name:'国家应急广播平台',
	                	itemStyle: {
							normal: {
								color: "#1ba5dd"
							}
				         },
	                },{
	                	value:25, 
	                	name:'应急办',
	                	itemStyle: {
							normal: {
								color: "#41cefb"
							}
				         },
	                }
	            ].sort(function (a, b) { return a.value - b.value; }),
	            roseType: 'radius',
	            label: {
	                normal: {
	                    textStyle: {
	                        color: '#7c8491'
	                    }
	                }
	            },
	            labelLine: {
	                normal: {
	                    lineStyle: {
	                        color: '#d8d8d8'
	                    },
	                    smooth: 0.2,
	                    length: 0,
	                    length2: 20
	                }
	            },
	            itemStyle: {
		             normal: {
		                shadowBlur: 15,
		                shadowColor: 'rgba(0, 0, 0, 0.4)',
		                label:{
		                	formatter:'{d}%',
				        },
		             }
		         },

	            animationType: 'scale',
	            animationEasing: 'elasticOut',
	            animationDelay: function (idx) {
	                return Math.random() * 200;
	            }
	        }
	    ]
	};
	incidentChart.setOption(incidentOption);

	// 事件级别发布
	incidentRankOption = {
	    title: {
	        text: '事件级别发布',
	        bottom: '0',
	        left:'center',
	        textStyle: { 
	            color: '#585c65'
	        }
	    },
	    tooltip : {
	        formatter: "{b} : {c} ({d}%)"
	    },
	    visualMap: {
	        show: false,
	        min: 80,
	        max: 600,
	        inRange: {
	            colorLightness: [0, 1]
	        }
	    },
	    legend: {
	        // orient: 'vertical',
	        x: 'center',
	        bottom: '10%',
	        itemWidth:'10',
	        itemHeight:'10',
	        data:['红色事件','橙色事件','黄色事件','蓝色事件','绿色事件'],
	        align:"right"
	    },
	    series : [
	        {
	            type:'pie',
	            radius : '60%',
	            center: ['50%', '43%'],
	            data:[
	                {
	                	value:20, 
	                	name:'红色事件',
	                	itemStyle: {
							normal: {
								color: "#f75c53"
							}
				         },
	                },{
	                	value:25, 
	                	name:'橙色事件',
	                	itemStyle: {
							normal: {
								color: "#fea41e"
							}
				         },
	                },{
	                	value:27, 
	                	name:'黄色事件',
	                	itemStyle: {
							normal: {
								color: "#fada00"
							}
				         },
	                },{
	                	value:30, 
	                	name:'蓝色事件',
	                	itemStyle: {
							normal: {
								color: "#4579d8"
							}
				         },
	                },{
	                	value:33, 
	                	name:'绿色事件',
	                	itemStyle: {
							normal: {
								color: "#14ae8f"
							}
				         },
	                },
	            ].sort(function (a, b) { return a.value - b.value; }),
	            roseType: 'radius',
	            label: {
	                normal: {
	                    textStyle: {
	                        color: '#7c8491'
	                    }
	                }
	            },
	            labelLine: {
	                normal: {
	                    lineStyle: {
	                        color: '#d8d8d8'
	                    },
	                    smooth: 0.2,
	                    length: 10,
	                    length2: 20
	                }
	            },
	            itemStyle: {
		             normal: {
		                shadowBlur: 15,
		                shadowColor: 'rgba(0, 0, 0, 0.4)',
		                label:{
		                	formatter:'{d}%',
				        },
		             }
		         },
		        markLine:{
		        	symbolSize:1000
		        },
	            animationType: 'scale',
	            animationEasing: 'elasticOut',
	            animationDelay: function (idx) {
	                return Math.random() * 200;
	            }
	        }
	    ]
	};
	incidentRankChart.setOption(incidentRankOption);

	// 任务数量
	var taskNumData = [
		{
    		value:20,
        	itemStyle: {normal: {color: "#41cefb"}},
    	},{
    		value:50,
        	itemStyle: {normal: {color: "#00aaff"}},
    	},
    	{
    		value:40,
        	itemStyle: {normal: {color: "#1ba5dd"}},
    	},
    	{
    		value:150,
        	itemStyle: {normal: {color: "#4579d8"}},
    	}
    ];
	var yMax = 180;
	var dataShadow = [];
	for (var i = 0; i < taskNumData.length; i++) {
	    dataShadow.push(yMax);
	}
	taskNumOption = {
	    title: {
	        text: '任务数量',
	        bottom: '0',
	        left:'center',
	        textStyle: { 
	            color: '#585c65'
	        }
	    },
	    tooltip : {
	    	// formatter:"{b}<br />{c}个",
	    	formatter: '<div class="gb-bar-formatter">{b}<br /><em>{c}</em></div>',
	    	position: function (point, params, dom, rect, size) {
			    // 固定在顶部
			    return {left: rect.x-($(dom).width()-rect.width)/1.5, top: rect.y-$(dom).height()-10};
			},
	        backgroundColor: 'rgba(255,255,255,0)',
	        // borderColor:"#d8d8d8",
	        // borderWidth:1,
	        // textStyle:{
	        // 	color:"#000"
	        // },
	    },
	    grid: {
	        left: '8%',
	        containLabel: true
	    },
	    xAxis: {
	        data: ['等待审核', '等待发布', '正在发布', '发布完成'],
	        //刻度横线
	        axisTick: {
	            show: false
	        },
	        //刻度字样式
	        axisLabel: {
	            textStyle: {
	                color: '#7c8491',
	                fontSize:'14',
	                align: 'center'
	            },
	            interval:0,
         		// margin: 30,
				// rotate:-20,
	        },
	        //刻度线
	        axisLine: {
	            lineStyle: {
	                color:"#e5e5e5"
	            }
	        },
	        z: 10
	    },
	    yAxis: [{
	        //坐标轴名称
        	name: '单位：个',
	        nameGap: 40,
	        // nameRotate:0,
	        nameLocation: "middle",
	        nameTextStyle:{
	        	color:"#7c8491",
	        },
	        //刻度横线
	        axisTick: {
	            show: false
	        },
	        //刻度字样式
	        axisLabel: {
	            textStyle: {
	                color: '#7c8491',
	                fontSize:'14'
	            }
	        },
	        //刻度线
	        axisLine: {
	            lineStyle: {
	                color:"#e5e5e5"//刻度线颜色
	            }
	        },
	        //网格线
	        splitLine:{
				lineStyle:{
					color: '#e5e5e5'//网格线颜色
				}
			},
	    },{
            'type': 'value',
            'max': 200,
	        axisLine: {
	            lineStyle: {
	                color:"#e5e5e5"
	            }
	        }
        }],
	    dataZoom: [
	        {
	            type: 'inside'
	        }
	    ],
	    series: [
	        { // For shadow
	            type: 'bar',
	            itemStyle: {
	                normal: {color: '#f7f8fa'}
	            },
        		silent: true,
	            barGap:'-100%',
	            barCategoryGap:'40%',
	            data: dataShadow,
	            animation: false
	        },
	        {
	            type: 'bar',
	            data: taskNumData
	        }
	    ]
	};
	taskNumChart.setOption(taskNumOption);

	// 事件类型统计
	// 事件类型统计数据
	var incidentTypeData = [
		{
    		value:20,
        	itemStyle: {normal: {color: "#949eff"}},
    	},{
    		value:230,
        	itemStyle: {normal: {color: "#9b7fe2"}},
    	},{
    		value:90,
        	itemStyle: {normal: {color: "#6b65df"}},
    	},{
    		value:20,
        	itemStyle: {normal: {color: "#949eff"}},
    	},{
    		value:45,
        	itemStyle: {normal: {color: "#9b7fe2"}},
    	},{
    		value:70,
        	itemStyle: {normal: {color: "#6b65df"}},
    	},{
    		value:80,
        	itemStyle: {normal: {color: "#949eff"}},
    	},{
    		value:90,
        	itemStyle: {normal: {color: "#9b7fe2"}},
    	},{
    		value:90,
        	itemStyle: {normal: {color: "#6b65df"}},
    	},{
    		value:80,
        	itemStyle: {normal: {color: "#949eff"}},
    	},{
    		value:90,
        	itemStyle: {normal: {color: "#9b7fe2"}},
    	},{
    		value:90,
        	itemStyle: {normal: {color: "#6b65df"}},
    	},{
    		value:80,
        	itemStyle: {normal: {color: "#949eff"}},
    	},{
    		value:90,
        	itemStyle: {normal: {color: "#9b7fe2"}},
    	},{
    		value:90,
        	itemStyle: {normal: {color: "#6b65df"}},
    	},{
    		value:80,
        	itemStyle: {normal: {color: "#949eff"}},
    	},{
    		value:90,
        	itemStyle: {normal: {color: "#9b7fe2"}},
    	},{
    		value:90,
        	itemStyle: {normal: {color: "#6b65df"}},
    	}
    ];
    // x轴数据
    var incidentTypexAxis=[
    	"金属与非金属矿金属与非金属矿1","金属与非金属矿金属与非金属矿2","金属与非金属矿金属与非金属矿3","金属与非金属矿金属与非金属矿4","金属与非金属矿金属与非金属矿5","金属与非金属矿金属与非金属矿6","金属与非金属矿金属与非金属矿7","金属与非金属矿金属与非金属矿8","金属与非金属矿金属与非金属矿9","金属与非金属矿金属与非金属矿10","金属与非金属矿金属与非金属矿11","金属与非金属矿金属与非金属矿12","金属与非金属矿金属与非金属矿13","金属与非金属矿金属与非金属矿14"
    ];
    // 对x轴数据换行处理，4个字换行
	var incidentTypexAxisData=[]
    for (var i = 0; i < incidentTypexAxis.length; i++) {
    	var strs = incidentTypexAxis[i].split(''); //字符串数组
        var str = ''
        for (var j = 0, s; s = strs[j++];) { //遍历字符串数组
            str += s;
            if (!(j % 4)) str += '\n';
        }
        incidentTypexAxisData.push(str)
    }

	var yMaxTwo = 300;
	var dataShadowTwo = [];
	for (var i = 0; i < incidentTypeData.length; i++) {
	    dataShadowTwo.push(yMaxTwo);
	}

	incidentTypeOption = {
	    title: {
	        text: '任务数量',
	        bottom: '0',
	        left:'center',
	        textStyle: { 
	            color: '#585c65'
	        }
	    },
	    // 区域缩放
	    dataZoom: [
	        {
	            start: 30,
	            end: 70,
	        	bottom: '8%',
	            backgroundColor:"#d0daeb",
	            fillerColor:"#6e6fe6",
	            handleIcon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z',
        		handleSize: '60%',
        		handleStyle: {
		            color: '#fff',
		        },
				showDataShadow:false,
	        },
	        {
	            type: 'inside',
	        }
	    ],
	    tooltip : {
	    	formatter: '<div class="gb-bar-formatter">{b}<br /><em>{c}</em></div>',
	    	position: function (point, params, dom, rect, size) {
			    // 固定在顶部
			    return {left: rect.x-($(dom).width()/2)+(rect.width/2.2), top: rect.y-$(dom).height()-10};
			},
	        backgroundColor: 'rgba(255,255,255,0)',
	        // borderColor:"#d8d8d8",
	        // borderWidth:1,
	        // textStyle:{
	        // 	color:"#000"
	        // },
	    },
	    grid: {
	        containLabel: true,
	        left:'5%',
	        right:'3%',
	        bottom: '18%',
	    },
	    xAxis: {
	        // data: ['金属与非\n金属矿金\n属与非金\n属矿','金属与非\n金属矿金\n属与非金\n属矿','金属与非\n金属矿金\n属与非金\n属矿','金属与非\n金属矿金\n属与非金\n属矿','金属与非\n金属矿金\n属与非金\n属矿','金属与非\n金属矿金\n属与非金\n属矿','金属与非\n金属矿金\n属与非金\n属矿','金属与非\n金属矿金\n属与非金\n属矿','金属与非\n金属矿金\n属与非金\n属矿','金属与非\n金属矿金\n属与非金\n属矿','金属与非\n金属矿金\n属与非金\n属矿','金属与非\n金属矿金\n属与非金\n属矿','金属与非\n金属矿金\n属与非金\n属矿','金属与非\n金属矿金\n属与非金\n属矿','金属与非\n金属矿金\n属与非金\n属矿','金属与非\n金属矿金\n属与非金\n属矿','金属与非\n金属矿金\n属与非金\n属矿','金属与非\n金属矿金\n属与非金\n属矿'],
	        data:incidentTypexAxisData,
	        //刻度横线
	        axisTick: {
	            show: false
	        },
	        //刻度字样式
	        axisLabel: {
	            textStyle: {
	                color: '#7c8491',
	                fontSize:'14',
	                align: 'center'
	            },
	            // interval:0,//x轴是否自动调整显示数量
	            // formatter:function(val){
	            // 	var strs = val.split(''); //字符串数组
             //        var str = ''
             //        for (var i = 0, s; s = strs[i++];) { //遍历字符串数组
             //            str += s;
             //            if (!(i % 4)) str += '\n';
             //        }
             //        return str
	            // }
         		// margin: 30,
				// rotate:-20,
	        },
	        //刻度线
	        axisLine: {
	            lineStyle: {
	                color:"#e5e5e5"
	            }
	        },
	        z: 10
	    },
	    yAxis: [{
	        //坐标轴名称
        	name: '单位：个',
	        nameGap: 40,
	        // nameRotate:0,
	        nameLocation: "middle",
	        nameTextStyle:{
	        	color:"#7c8491",
	        },
	        //刻度横线
	        axisTick: {
	            show: false
	        },
	        //刻度字样式
	        axisLabel: {
	            textStyle: {
	                color: '#7c8491',
	                fontSize:'14'
	            }
	        },
	        //刻度线
	        axisLine: {
	            lineStyle: {
	                color:"#e5e5e5"//刻度线颜色
	            }
	        },
	        //网格线
	        splitLine:{
				lineStyle:{
					color: '#e5e5e5'//网格线颜色
				}
			},
	    },{
            'type': 'value',
            'max': 200,
	        axisLine: {
	            lineStyle: {
	                color:"#e5e5e5"
	            }
	        }
        }],
	    series: [
	        { // For shadow
	            type: 'bar',
	            itemStyle: {
	                normal: {color: '#f7f8fa'}
	            },
        		silent: true,
	            barGap:'-100%',
	            barCategoryGap:'40%',
	            data: dataShadowTwo,
	            animation: false
	        },
	        {
	            type: 'bar',
	            data: incidentTypeData
	        }
	    ]
	};
	incidentTypeChart.setOption(incidentTypeOption);


	window.onresize=function(){
		incidentChart.resize();
		incidentRankChart.resize();
		taskNumChart.resize();
		incidentTypeChart.resize();
	}
</script>